"use strict";var app=angular.module("myApp",["ui.router","ngDialog","angular-popups"]);app.run(["$rootScope",function($rootScope){$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){NProgress.configure({showSpinner:!1}),NProgress.start()}),$rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){NProgress.done()})}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function($stateProvider,$urlRouterProvider,$locationProvider){$stateProvider.state("home",{url:"/home",templateUrl:"src/recommend/home.html",controller:"homeCtrl"}).state("articleDet",{url:"/article/:uuid",templateUrl:"src/article/articleDetail.html",controller:"articleDetailCtrl",cache:!1}).state("directiveDet",{url:"/directive/:uuid",templateUrl:"src/sdk/sdkDetail/directiveDetail.html",controller:"directiveDetailCtrl"}).state("history",{url:"/history",templateUrl:"src/history/history.html",controller:"historyCtrl"}).state("search",{url:"/search/:q",templateUrl:"src/search/search.html",controller:"searchCtrl"}).state("advise",{url:"/advise",templateUrl:"src/temp/advise/advise.html",controller:""}).state("term",{url:"/term",templateUrl:"src/temp/term/term.html",controller:""}).state("help",{url:"/help",templateUrl:"src/temp/help/help.html",controller:"helpCtrl"}).state("contactus",{url:"/contactus",templateUrl:"src/temp/contactus/contactus.html",controller:""}).state("aboutus",{url:"/aboutus",templateUrl:"src/temp/aboutus/aboutus.html",controller:""}).state("sdkList",{url:"/sdkList/:domain",templateUrl:"src/sdk/sdkList/sdkList.html",controller:"sdkListCtrl"}).state("test",{url:"/test",templateUrl:"src/X/test.html",controller:"testCtrl"}),$urlRouterProvider.otherwise("home")}]);
app.directive("raty",["$timeout",function($timeout){return{restrict:"E",link:function(scope,elem,attrs){$timeout(function(){$(elem).raty({score:function(){return attrs.score},readOnly:attrs.readonly,number:attrs.number,click:function(score,evt){scope.articleScore=score,scope.$apply()},path:"images/raty/",hints:["一星","两星","三星","四星","五星"],noRatedMsg:"暂无评分"})},500)}}}]);
app.filter("dateDiff",function(){return function(dateTimeStamp){var secs=(new Date).getTime()/1e3-dateTimeStamp/1e3;Math.floor(secs);var minutes=secs/60;if(secs=Math.floor(secs%60),minutes<1)return"刚刚";var hours=minutes/60;if(minutes=Math.floor(minutes%60),hours<1)return minutes+"分钟前";var days=hours/24;if(hours=Math.floor(hours%24),days<1)return hours+"小时前";var weeks=days/7;if(days=Math.floor(days%7),weeks<1)return days+"天前";var months=weeks/4.35;if(weeks=Math.floor(weeks%4.35),months<1)return weeks+"周前";var years=months/12;return months=Math.floor(months%12),years<1?months+"月前":(years=Math.floor(years),years+"年前")}});
app.filter("strToHtml",["$sce",function($sce){return function(str){return $sce.trustAsHtml(str)}}]);
app.service("layerUtil",["ngDialog","$timeout",function(ngDialog,$timeout){this.close=function(timeout){$timeout(function(){ngDialog.close()},timeout?timeout:0)},this.iAlert=function($scope,title,content,btnMsg){$scope.iAlertDialog={title:title,content:content,btnMsg:btnMsg},ngDialog.open({template:"/sdks/app/components/layer/temp/iAlert.html",scope:$scope}),$scope.yesFunc=function(){ngDialog.close()}},this.iConfirm=function($scope,title,content,noBtnMsg,yesBtnMsg,noFunc,yesFunc){$scope.iConfirmDialog={title:title,content:content,noBtnMsg:noBtnMsg,yesBtnMsg:yesBtnMsg},ngDialog.open({template:"/sdks/app/components/layer/temp/iConfirm.html",scope:$scope}),$scope.yesFunc=yesFunc,$scope.noFunc=noFunc}}]);
app.constant("serviceConfig",{preset:"dev",dev:{getUserInfo:"/sdk/userInfo",getRecomend:"/recommend",getRecomendMore:"/recommend/more",followSDK:"/sdk/follow",unFollowSDK:"/sdk/unfollow",getSDKDomainList:"/sdk/domain/",getSDKDomainListMore:"/sdk/domain/more",getSKDDetail:"/sdk/detail/",getArticleList:"/article/list",getArticleDetail:"/article/detail/",addComment:"/evaluate/add",searchKeyWord:"/find",searchMore:"/find/more",getHistory:"/track",getHistoryMore:"/track/more",getEvaluateMore:"/evaluate/view/more",getNavigationBar:"/navigation",getSDKList:"/sdk/list",getSDKListMore:"/sdk/more",followCus:"/customer/follow",unFollowCus:"/customer/unfollow"},local:{followSDK:"/sdks/app/fakeData/followSDK.json",getArticleDetail:"/sdks/app/fakeData/getArticleDetail.json",getArticleList:"/sdks/app/fakeData/getArticleList.json",getHistory:"/sdks/app/fakeData/getHistory.json",getNavigationBar:"/sdks/app/fakeData/getNavigationBar.json",getRecomend:"/sdks/app/fakeData/getRecomend.json",getSDKDomainList:"/sdks/app/fakeData/getSDKDomainList.json",getSDKList:"/sdks/app/fakeData/getSDKList.json",getSKDDetail:"/sdks/app/fakeData/getSKDDetail.json",getUserInfo:"/sdks/app/fakeData/getUserInfo.json",unFollowSDK:"/sdks/app/fakeData/unFollowSDK.json",searchKeyWord:"/sdks/app/fakeData/searchKeyWord.json",getRecomendMore:"/sdks/app/fakeData/getRecomendMore.json",getSDKDomainListMore:"/sdks/app/fakeData/getSDKDomainListMore.json",addComment:"/sdks/app/fakeData/addComment.json",searchMore:"/sdks/app/fakeData/searchMore.json",getHistoryMore:"/sdks/app/fakeData/getHistoryMore.json",getEvaluateMore:"/sdks/app/fakeData/getEvaluateMore.json",getSDKListMore:"/sdks/app/fakeData/getSDKListMore.json"}});
app.config(function($httpProvider){$httpProvider.defaults.transformRequest=function(obj){var str=[];for(var p in obj)str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return str.join("&")},$httpProvider.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"}}).service("sdkService",["$http","serviceConfig",function($http,serviceConfig){var base=null;base="dev"==serviceConfig.preset?serviceConfig.dev:serviceConfig.local,this.getUserInfo=function(){return $http({method:"GET",url:base.getUserInfo})},this.getRecomend=function(param){return $http({method:"GET",url:base.getRecomend,params:param})},this.getRecomendMore=function(param){return $http({method:"GET",url:base.getRecomendMore,params:param})},this.followSDK=function(data){return $http({method:"POST",url:base.followSDK,data:data})},this.unFollowSDK=function(data){return $http({method:"POST",url:base.unFollowSDK,data:data})},this.getSKDDetail=function(url){return $http({method:"GET",url:base.getSKDDetail+url})},this.getArticleList=function(param){return $http({method:"GET",url:base.getArticleList,params:param})},this.getArticleDetail=function(url){return $http({method:"GET",url:base.getArticleDetail+url})},this.addComment=function(data){return $http({method:"POST",url:base.addComment,data:data})},this.searchKeyWord=function(param){return $http({method:"GET",url:base.searchKeyWord,params:param})},this.searchMore=function(param){return $http({method:"GET",url:base.searchMore,params:param})},this.getHistory=function(param){return $http({method:"GET",url:base.getHistory,params:param})},this.getHistoryMore=function(param){return $http({method:"GET",url:base.getHistoryMore,params:param})},this.getEvaluateMore=function(param){return $http({method:"GET",url:base.getEvaluateMore,params:param})},this.getNavigationBar=function(param){return $http({method:"GET",url:base.getNavigationBar,params:param})},this.getSDKList=function(param){return $http({method:"GET",url:base.getSDKList,params:param})},this.getSDKListMore=function(param){return $http({method:"GET",url:base.getSDKListMore,params:param})},this.followCus=function(data){return $http({method:"POST",url:base.followCus,data:data})},this.unFollowCus=function(data){return $http({method:"POST",url:base.unFollowCus,data:data})}}]);
"use strict";app.controller("headerCtrl",["$scope","$rootScope","$state","$http","sdkService","$compile",function($scope,$rootScope,$state,$http,sdkService,$compile){function getNavigationBar(){sdkService.getNavigationBar().then(function(res){$scope.domains=res.data.data.domains,$scope.sdks=res.data.data.sdks}).then(function(res){})}$scope.q="",$scope.hoverQa=!1,$scope.showSearch=!1,$scope.loginStatus=!1,document.getElementsByTagName("body")[0].addEventListener("click",function(){$scope.showSearch=!1,$scope.$apply()}),document.addEventListener("keypress",function(e){13==e.keyCode&&document.getElementById("search_input")==document.activeElement&&$scope.goSearch()}),getNavigationBar(),sdkService.getUserInfo().then(function(res){res.data.status?($scope.user=res.data.data.user,$scope.myIdentities=res.data.data.myIdentities,$rootScope.loginStatus=!0,$scope.loginStatus=!0):($rootScope.loginStatus=!1,$scope.loginStatus=!1)}).then(function(res){}),$scope.typing=function(){if(!$scope.q)return void($scope.showSearch=!1);var params={q:$scope.q};sdkService.searchKeyWord(params).then(function(res){$scope.sdks=res.data.data.sdks,$scope.articles=res.data.data.articles;for(var i=0;i<$scope.articles.length;i++)$scope.articles[i].title=$scope.articles[i].title.toLowerCase().replace($scope.q.toLowerCase(),'<span class="keyword">'+$scope.q+"</span>");0!=$scope.sdks.length|0!=$scope.articles?$scope.showSearch=!0:$scope.showSearch=!1}).then(function(res){})},$scope.goUser=function(){location.href="/home.html"},$scope.goSearch=function(){$scope.q&&$state.go("search",{q:$scope.q})},$scope.goSDKList=function(domain){$state.go("sdkList",{domain:domain})},$scope.goFollowSDK=function(uuid){$state.go("directiveDet",{uuid:uuid})},$scope.goArticleDetail=function(uuid){$state.go("articleDet",{uuid:uuid}),$scope.q=""},$scope.goSDKDetail=function(uuid){$state.go("directiveDet",{uuid:uuid}),$scope.q=""},$scope.goHome=function(){$state.go("home")},$scope.goQa=function(){window.open("/")},$scope.enter=function(){$scope.hoverQa=!0},$scope.leave=function(){$scope.hoverQa=!1},$scope.goQaWeb=function(c){location.href="/"+c.category+"/"+c.alias},$rootScope.$on("followChanges",function(){getNavigationBar()})}]);
"use strict";app.controller("footerCtrl",["$scope","$rootScope","$state",function($scope,$rootScope,$state){$scope.shpw2Top=!1,$scope.doFooter=function(index){switch(index){case 0:$state.go("contactus",{name:"contactus"});break;case 1:$state.go("advise",{name:"advise"});break;case 2:$state.go("term",{name:"term"});break;case 3:$state.go("help",{name:"help"});break;case 4:$state.go("aboutus",{name:"aboutus"})}},$scope.back2Top=function(){scrollTo(0,0)},$scope.openWb=function(){window.open("http://weibo.com/dreawer99")},$scope.openWxxcx=function(){window.open("http://www.wxapp-union.com/")}}]);
app.controller("asideCtrl",["$scope","$rootScope","$state","$stateParams",function($scope,$rootScope,$state,$stateParams){$rootScope.$watch("loginStatus",function(){$scope.loginStatus=$rootScope.loginStatus}),$scope.goHistory=function(){$state.go("history")}}]);
"use strict";app.controller("homeCtrl",["$scope","$rootScope","$state","sdkService","layerUtil",function($scope,$rootScope,$state,sdkService,layerUtil){function getRec(){var param={startTime:$scope.createTime};sdkService.getRecomend(param).then(function(res){res.data.data.recommends|res.data.data.recommends.length<5?$scope.showMore="没有更多信息":$scope.showMore="加载更多",$scope.recommends=$scope.recommends.concat(res.data.data.recommends);for(var i=0;i<$scope.recommends.length;i++)$scope.recommends[i].recommendContent.isFollowed?$scope.recommends[i].followStatu="已关注":$scope.recommends[i].followStatu="关注";$scope.recommends&&($scope.createTime!=$scope.recommends[$scope.recommends.length-1].createTime?$scope.createTime=$scope.recommends[$scope.recommends.length-1].createTime:$scope.showMore="没有更多信息")}).then(function(res){})}$scope.isArticle=!0,$scope.createTime=(new Date).getTime(),$scope.recommends=[],$scope.showMore="没有更多信息",getRec(),$scope.goArticle=function(index){0==index?$scope.isArticle=!0:$scope.isArticle=!1,1==index?$scope.isArticle=!1:$scope.isArticle=!0},$scope.goDetail=function(uuid,category){"article"==category?window.open("/sdks/app/index.html#/article/"+uuid):window.open("/sdks/app/index.html#/directive/"+uuid)},$scope.follow=function(c){if(!$rootScope.loginStatus)return void layerUtil.iConfirm($scope,"提示","暂未登录","注册","登录",function(){location.href="/signup.html"},function(){location.href="/signin.html"});if(c.recommendContent.isFollowed){var data={sdkId:c.recommendContent.id};sdkService.unFollowSDK(data).then(function(res){}).then(function(res){c.recommendContent.followsCount--,c.recommendContent.isFollowed=!1,c.followStatu="关注",$rootScope.$broadcast("followChanges")})}else{var data={sdkId:c.recommendContent.id};sdkService.followSDK(data).then(function(res){}).then(function(res){c.recommendContent.followsCount++,c.recommendContent.isFollowed=!0,c.followStatu="已关注",$rootScope.$broadcast("followChanges")})}},$scope.getMoreRec=function(){"没有更多信息"!=$scope.showMore&&getRec()}}]);
"use strict";app.controller("articleDetailCtrl",["$scope","$rootScope","$state","$stateParams","sdkService","layerUtil",function($scope,$rootScope,$state,$stateParams,sdkService,layerUtil){function getArticleDetail(){sdkService.getArticleDetail($scope.uuid).then(function(res){$scope.article=res.data.data.article,$scope.articles=res.data.data.articles,$scope.evaluates=res.data.data.evaluates,$scope.comForm.type="article",$scope.comForm.score=$scope.article.score,$scope.comForm.contentId=$scope.article.id}).then(function(res){})}$scope.uuid=$stateParams.uuid,$scope.comForm={contentId:"",type:"",score:"",title:"",detail:""},getArticleDetail(),$scope.com=function(){if(!$scope.comForm.detail)return void layerUtil.iAlert($scope,"提示","请撰写评论内容","好的");if(!$scope.articleScore)return void layerUtil.iAlert($scope,"提示","请评分","好的");var data={contentId:$scope.comForm.contentId,type:$scope.comForm.type,score:$scope.articleScore,title:$scope.comForm.title,detail:$scope.comForm.detail};sdkService.addComment(data).then(function(res){res.data.status?($scope.comForm.detail="",getArticleDetail()):res.data.data&&"unlogin"==res.data.data.code?layerUtil.iConfirm($scope,"提示","暂未登录","注册","登录",function(){location.href="/signup.html"},function(){location.href="/signin.html"}):layerUtil.iAlert($scope,"提示",res.data.errors[0].message,"好的")}).then(function(res){console.log("/post com fail"),console.info(res)})},$scope.goArticle=function(id){$state.go("articleDet",{uuid:id})},$scope.showPop=!1,$scope.popup4=function(obj,e){0==$scope.showPop?($scope.showPop=e,$scope.popInfo=obj):$scope.showPop=!1},$scope.leaveParent=function(){$scope.timmer=setTimeout(function(){$scope.showPop=!1,$scope.$apply()},100)},$scope.enterChild=function(){$scope.timmer&&clearTimeout($scope.timmer)},$scope.follow=function(cus){if(!$rootScope.loginStatus)return void layerUtil.iConfirm($scope,"提示","暂未登录","注册","登录",function(){location.href="/signup.html"},function(){location.href="/signin.html"});var data={customerId:cus.id};cus.isFollowed?sdkService.unFollowCus(data).then(function(res){cus.followersCount--,cus.isFollowed=!1}).then(function(res){}):sdkService.followCus(data).then(function(res){cus.followersCount++,cus.isFollowed=!0}).then(function(res){})}}]);
"use strict";app.controller("directiveDetailCtrl",["$scope","$rootScope","$state","$stateParams","sdkService","layerUtil",function($scope,$rootScope,$state,$stateParams,sdkService,layerUtil){function getArticleList(param){sdkService.getArticleList(param).then(function(res){res.data.data.articles.length<5?setTimeout(function(){$scope.showMore="没有更多信息",$scope.$apply()}):$scope.showMore="加载更多",$scope.articles=$scope.articles.concat(res.data.data.articles),$scope.articles&&($scope.articles[$scope.articles.length-1]&&$scope.createTime!=$scope.articles[$scope.articles.length-1].createTime?$scope.createTime=$scope.articles[$scope.articles.length-1].createTime:setTimeout(function(){$scope.showMore="没有更多信息",$scope.$apply()}))}).then(function(){})}$scope.isArticle=!0,$scope.uuid=$stateParams.uuid,$scope.loginStatus=$rootScope.loginStatus,$scope.articles=[],$scope.showMore="没有更多信息",$scope.createTime=(new Date).getTime(),$scope.isSummary=!0,sdkService.getSKDDetail($scope.uuid).then(function(res){$scope.sdk=res.data.data.sdk,$scope.articles=res.data.data.articles,$scope.sdkCodes=res.data.data.sdkCodes,$scope.sdk.followStatu=$scope.sdk.isFollowed?"已关注":"关注组件",$scope.articles|$scope.articles.length<5?$scope.showMore="没有更多信息":$scope.showMore="加载更多",$scope.articles&&($scope.createTime!=$scope.articles[$scope.articles.length-1].createTime?$scope.createTime=$scope.articles[$scope.articles.length-1].createTime:$scope.showMore="没有更多信息")}).then(function(res){}),$scope.tabArticle=function(index){0==index?$scope.isArticle=!0:$scope.isArticle=!1,1==index?$scope.isArticle=!1:$scope.isArticle=!0},$scope.follow=function(sdk){if(!$rootScope.loginStatus)return void layerUtil.iConfirm($scope,"提示","暂未登录","注册","登录",function(){location.href="/signup.html"},function(){location.href="/signin.html"});var data={sdkId:sdk.id};sdk.isFollowed?sdkService.unFollowSDK(data).then(function(res){}).then(function(res){sdk.followsCount--,sdk.isFollowed=!1,sdk.followStatu="关注",$rootScope.$broadcast("followChanges")}):sdkService.followSDK(data).then(function(res){}).then(function(res){sdk.followsCount++,sdk.isFollowed=!0,sdk.followStatu="已关注",$rootScope.$broadcast("followChanges")})},$scope.changeType=function(type){var param={startTime:(new Date).getTime(),sdkId:$scope.sdk.id,type:type};$scope.articles=[],getArticleList(param)},$scope.goArticle=function(uuid){window.open("/sdks/app/index.html#/article/"+uuid)},$scope.goHistory=function(){$scope.loginStatus&&$state.go("history")},$scope.loadMoreArticle=function(){if("没有更多信息"!=$scope.showMore){var param={startTime:$scope.createTime,sdkId:$scope.uuid,type:$scope.type};getArticleList(param)}},$scope.showDet=function(){$scope.isSummary=!1,$scope.sdk.slogan=$scope.sdk.intro},$scope.openDocument=function(url){window.open(url)}}]);
"use strict";app.controller("historyCtrl",["$scope","$rootScope","$state","sdkService","layerUtil",function($scope,$rootScope,$state,sdkService,layerUtil){function getHistory(){var param={startTime:$scope.startTime,type:$scope.isArticle?"article":"sdk"};sdkService.getHistory(param).then(function(res){res.data.data&&res.data.data.tracks|res.data.data.tracks.length<5?$scope.showMore="没有更多信息":($scope.showMore="加载更多",$scope.startTime=res.data.data.tracks[res.data.data.tracks.length-1].createTime),$scope.tracks=$scope.tracks.concat(res.data.data.tracks);for(var i=0;i<$scope.tracks.length;i++)$scope.tracks[i].content.followStatu=$scope.tracks[i].content.isFollowed?"已关注":"关注"}).then(function(res){console.info(res)})}$scope.isArticle=!0,$scope.startTime=(new Date).getTime(),$scope.showMore="没有更多信息",$scope.tracks=[],getHistory(),$scope.goArticle=function(index){0==index?($scope.isArticle=!0,$scope.startTime=(new Date).getTime(),$scope.tracks=[],getHistory()):1==index&&($scope.isArticle=!1,$scope.startTime=(new Date).getTime(),$scope.tracks=[],getHistory())},$scope.goArticleDetail=function(uuid){window.open("/sdks/app/index.html#/article/"+uuid)},$scope.goDirectiveDetail=function(uuid){window.open("/sdks/app/index.html#/directive/"+uuid)},$scope.follow=function(sdk){if(!$rootScope.loginStatus)return void layerUtil.iConfirm($scope,"提示","暂未登录","注册","登录",function(){location.href="/signup.html"},function(){location.href="/signin.html"});var data={sdkId:sdk.id};sdk.isFollowed?sdkService.unFollowSDK(data).then(function(res){sdk.followsCount--,sdk.isFollowed=!1,sdk.followStatu="关注",$rootScope.$broadcast("followChanges")}).then(function(res){}):sdkService.followSDK(data).then(function(res){sdk.followsCount++,sdk.isFollowed=!0,sdk.followStatu="已关注",$rootScope.$broadcast("followChanges")}).then(function(res){})},$scope.getMore=function(){"没有更多信息"!=$scope.showMore&&getHistory()}}]);
"use strict";app.controller("searchCtrl",["$scope","$rootScope","$state","$stateParams","sdkService","layerUtil",function($scope,$rootScope,$state,$stateParams,sdkService,layerUtil){function init(){$scope.startTime=(new Date).getTime(),$scope.showMore="没有更多信息",$scope.category="article",$scope.sdks=[],$scope.articles=[]}function find(q){var params={q:q,startTime:$scope.startTime,type:$scope.category};sdkService.searchKeyWord(params).then(function(res){$scope.sdks=res.data.data.sdks.concat($scope.sdks),$scope.articles=$scope.articles.concat(res.data.data.articles);for(var i=0;i<$scope.sdks.length;i++)$scope.sdks[i].followStatu=$scope.sdks[i].isFollowed?"已关注":"关注";5==res.data.data.articles.length|5==res.data.data.sdks.length?($scope.showMore="加载更多",$scope.startTime=$scope.isArticle?res.data.data.articles[4].createTime:res.data.data.sdks[4].createTime):$scope.showMore="没有更多信息"}).then(function(res){})}$scope.q=$stateParams.q,init(),$scope.q&&find($scope.q),$scope.isArticle=!0,$scope.goArticle=function(index){0==index?(init(),$scope.isArticle=!0,$scope.category="article",find($scope.q)):(init(),$scope.isArticle=!1,$scope.category="sdk",find($scope.q))},$scope.goArticleDetail=function(uuid){window.open("/sdks/app/index.html#/article/"+uuid)},$scope.goDirectiveDetail=function(uuid){window.open("/sdks/app/index.html#/directive/"+uuid)},$scope.follow=function(sdk){var data={sdkId:sdk.id};sdk.isFollowed?sdkService.unFollowSDK(data).then(function(res){return res.data.data&&"unlogin"==res.data.data.code?void layerUtil.iConfirm($scope,"提示","暂未登录","注册","登录",function(){location.href="/signup.html"},function(){location.href="/signin.html"}):(sdk.followsCount--,sdk.isFollowed=!1,sdk.followStatu="关注",void $rootScope.$broadcast("followChanges"))}).then(function(res){}):sdkService.followSDK(data).then(function(res){return res.data.data&&"unlogin"==res.data.data.code?void layerUtil.iConfirm($scope,"提示","暂未登录","注册","登录",function(){location.href="/signup.html"},function(){location.href="/signin.html"}):(sdk.followsCount++,sdk.isFollowed=!0,sdk.followStatu="已关注",void $rootScope.$broadcast("followChanges"))}).then(function(res){})},$scope.getMoreSearch=function(){"没有更多信息"!=$scope.showMore&&find($scope.q)}}]);
app.run(["$rootScope","$window","$location","$log","$templateCache",function($rootScope,$window,$location,$log,$templateCache){function stateChangeSuccess($rootScope){$templateCache.removeAll()}var stateChangeSuccess=$rootScope.$on("$stateChangeSuccess",stateChangeSuccess)}]).controller("temp_asideCtrl",["$scope","$rootScope","$state","$stateParams",function($scope,$rootScope,$state,$stateParams){$scope.activeName=$state.current.name,console.log(1),$scope.slideChange=function(index){switch(index){case 0:$state.go("aboutus",{name:"contactus"});break;case 1:$state.go("contactus",{name:"advise"});break;case 2:$state.go("help",{name:"term"});break;case 3:$state.go("term",{name:"help"});break;case 4:$state.go("advise",{name:"aboutus"})}}}]);
"use strict";app.controller("helpCtrl",["$scope","$rootScope","$state","$anchorScroll","$location",function($scope,$rootScope,$state,$anchorScroll,$location){$scope.activeEle="feed",$scope.go=function(anchor){$scope.activeEle=anchor,$location.hash(anchor),$anchorScroll()}}]);
app.controller("adviseCtrl",["$scope","$rootScope","$state","$stateParams","$http",function($scope,$rootScope,$state,$stateParams,$http){$scope.form={content:"",type:""},$scope.success=0,$scope.errorMsg="",$scope.postAdvise=function(){return $rootScope.loginStatus?$scope.form.type?$scope.form.content?void $http({method:"post",url:"/feedback/add",data:{type:"feedback",detail:$scope.form.content},headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(obj){var str=[];for(var p in obj)str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return str.join("&")}}).then(function(res){$scope.form.content="",$state.go("home")}).then(function(res){$scope.success=2}):($scope.success=2,void($scope.errorMsg="请输入反馈内容")):($scope.success=2,void($scope.errorMsg="请选择反馈类型")):void alert("暂未登录")},$scope.goBack=function(){history.back(-1)}}]);
"use strict";app.controller("sdkListCtrl",["$scope","$rootScope","$state","$stateParams","sdkService","layerUtil",function($scope,$rootScope,$state,$stateParams,sdkService,layerUtil){function getSDKList(){var param={startTime:$scope.createTime,name:$scope.domain};sdkService.getSDKList(param).then(function(res){res.data.data.sdks|res.data.data.sdks.length<5?$scope.showMore="没有更多信息":$scope.showMore="加载更多",callBack(res)}).then(function(res){})}function callBack(res){if(res.data.data){$scope.sdkList=$scope.sdkList.concat(res.data.data.sdks),$scope.sdkList&&($scope.createTime!=$scope.sdkList[$scope.sdkList.length-1].createTime?$scope.createTime=$scope.sdkList[$scope.sdkList.length-1].createTime:$scope.showMore="没有更多信息");for(var i=0;i<$scope.sdkList.length;i++)$scope.sdkList[i].isFollowed?$scope.sdkList[i].followStatu="已关注":$scope.sdkList[i].followStatu="关注"}}$scope.domain=$stateParams.domain,$scope.createTime=(new Date).getTime(),$scope.showMore="没有更多信息",$scope.sdkList=[],getSDKList(),$scope.follow=function(c){if(!$rootScope.loginStatus)return void layerUtil.iConfirm($scope,"提示","暂未登录","注册","登录",function(){location.href="/signup.html"},function(){location.href="/signin.html"});var data={sdkId:c.id};c.isFollowed?sdkService.unFollowSDK(data).then(function(res){}).then(function(res){c.followsCount--,c.isFollowed=!1,c.followStatu="关注",$rootScope.$broadcast("followChanges")}):sdkService.followSDK(data).then(function(res){}).then(function(res){c.followsCount++,c.isFollowed=!0,c.followStatu="已关注",$rootScope.$broadcast("followChanges")})},$scope.goSDKDetail=function(uuid){window.open("/sdks/app/index.html#/directive/"+uuid)},$scope.loadMore=function(){"没有更多信息"!=$scope.showMore&&getSDKList()}}]);
"use strict";app.controller("testCtrl",function($scope,$rootScope,ngDialog){$scope.name="william wood",$scope.GetUser=function(){$http.get("/sdks/app/fakeData/followSDK.json").then(function(response){$scope.user=response.data})}});